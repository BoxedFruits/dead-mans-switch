{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/samba/Desktop/ETH Projects/dead-mans-switch/dead-mans-switch-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/samba/Desktop/ETH Projects/dead-mans-switch/dead-mans-switch-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/samba/Desktop/ETH Projects/dead-mans-switch/dead-mans-switch-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./App.css';import{Layout,Menu,Row,Col}from'antd';import\"antd/dist/antd.css\";import ContractCode from'./components/smartContract';import{BrowserRouter as Router,Link,Route,Switch}from\"react-router-dom\";import DeadMansContract from'./utils/DeadMansContract.abi.json';import{ethers,ContractFactory}from\"ethers\";import{useState}from'react';import{Collapse,Button,Input,Typography,Divider,Spin}from'antd';import\"antd/dist/antd.css\";import{LoadingOutlined}from'@ant-design/icons';import ContractInteraction from'./components/contractInteraction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Title=Typography.Title,Paragraph=Typography.Paragraph,Text=Typography.Text;var Panel=Collapse.Panel;var antIcon=/*#__PURE__*/_jsx(LoadingOutlined,{style:{fontSize:92,width:100},spin:true});var Header=Layout.Header,Content=Layout.Content,Footer=Layout.Footer;function App(){return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsx(Header,{style:{position:\"fixed\",zIndex:1,width:\"100%\"},children:/*#__PURE__*/_jsxs(Menu,{theme:\"dark\",mode:\"horizontal\",children:[/*#__PURE__*/_jsxs(Menu.Item,{children:[\"Home\",/*#__PURE__*/_jsx(Link,{to:\"/\"})]},\"1\"),/*#__PURE__*/_jsxs(Menu.Item,{children:[\"Smart Contract\",/*#__PURE__*/_jsx(Link,{to:\"code\"})]},\"2\")]})}),/*#__PURE__*/_jsx(Content,{style:{marginTop:\"6rem\"},children:/*#__PURE__*/_jsx(Row,{justify:\"center\",children:/*#__PURE__*/_jsxs(Col,{span:12,children:[/*#__PURE__*/_jsx(ContractSetup,{}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:ContractSetup}),/*#__PURE__*/_jsx(Route,{eaxact:true,path:\"/code\",component:ContractCode})]})]})})}),/*#__PURE__*/_jsx(Footer,{style:{marginTop:\"48px\"},children:\"Disclaimer: This is just a fun project that I wanted to do. Please don't use this for anything that is actually super duper serious. I am not responsible on how this is used\"})]})});}function ContractSetup(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),currentAccount=_useState2[0],setCurrentAccount=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),contractExists=_useState6[0],setContractExists=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),contractAddress=_useState8[0],setContractAddress=_useState8[1];var connectWallet=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _window,ethereum,accounts;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_window=window,ethereum=_window.ethereum;if(ethereum){_context.next=5;break;}alert(\"This app only works with MetaMask for now!\");return _context.abrupt(\"return\");case 5:_context.next=7;return ethereum.request({method:\"eth_requestAccounts\"});case 7:accounts=_context.sent;console.log(\"Connected\",accounts[0]);setCurrentAccount(accounts[0]);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function connectWallet(){return _ref.apply(this,arguments);};}();var createContract=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _window2,ethereum,provider,signer,decryptionKey,cadence,factory,contract;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_window2=window,ethereum=_window2.ethereum;if(!ethereum){_context2.next=17;break;}provider=new ethers.providers.Web3Provider(ethereum);signer=provider.getSigner();decryptionKey=document.getElementById(\"decryptionKey\").value;cadence=document.getElementById(\"cadence\").value;factory=new ContractFactory(DeadMansContract.abi,DeadMansContract.bytecode,signer);_context2.next=10;return factory.deploy(decryptionKey,cadence);case 10:contract=_context2.sent;console.log(\"Transaction sent\");setIsLoading(true);_context2.next=15;return contract.deployTransaction.wait().then(function(){// refactor to use async await\nconsole.log(contract.address);setIsLoading(false);setContractExists(true);setContractAddress(contract.address);});case 15:_context2.next=18;break;case 17:console.log(\"Ethereum object doesn't exist!\");case 18:_context2.next=23;break;case 20:_context2.prev=20;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 23:case\"end\":return _context2.stop();}}},_callee2,null,[[0,20]]);}));return function createContract(){return _ref2.apply(this,arguments);};}();var getContract=function getContract(){// Error if not the correct address\nvar _contractAddress=document.getElementById(\"contractAddress\").value;setContractAddress(_contractAddress);setContractExists(true);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Title,{style:{fontSize:\"56px\"},children:\"Dead Man's Switch\"}),!currentAccount?/*#__PURE__*/_jsx(Button,{size:\"large\",style:{marginBottom:\"24px\"},onClick:connectWallet,children:\"Connect Wallet\"}):/*#__PURE__*/_jsx(Title,{level:2,children:/*#__PURE__*/_jsxs(Text,{underline:true,children:[\"Currently connected as: \",currentAccount]})}),/*#__PURE__*/_jsx(Title,{level:2,style:{marginTop:\"2rem\",marginBottom:\"1.5rem\"},children:\"What is a Dead Man's Switch?\"}),/*#__PURE__*/_jsxs(Paragraph,{children:[\"A Dead Man's Switch is a switch that is designed to be activated or deactivated if the human operator becomes incapcitated such as through death, loss of consciousness, or being bodily removed from control. Originally applied to switches on a vehicle or machine, it has since come to be used to describe other intangible uses, as in computer software. \\xA0\",/*#__PURE__*/_jsx(\"a\",{href:\"https://en.wikipedia.org/wiki/Dead_man%27s_switch\",target:\"_blank\",children:\"Source: Wikipedia (Dead Man's Switch)\"})]}),/*#__PURE__*/_jsx(Paragraph,{style:{marginBottom:\"4rem\"},children:\"This implementation of a Dead Man's Switch has two parts to it. The file/information that is being used as a contigency to ensure a person's safety and the smart contract which lives on the blockchain that has the decrption key to that file.\"}),isLoading?/*#__PURE__*/_jsx(Spin,{indicator:antIcon,style:{width:\"100%\",marginTop:\"4rem\"}}):/*#__PURE__*/_jsx(\"div\",{children:contractExists?/*#__PURE__*/_jsx(ContractInteraction,{address:contractAddress}):/*#__PURE__*/_jsxs(\"div\",{className:\"inputs\",children:[/*#__PURE__*/_jsx(Divider,{plain:true,children:\"Check on deployed Dead Man's Switch\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Input,{size:\"large\",id:\"contractAddress\",placeholder:\"Address of contract\"}),/*#__PURE__*/_jsx(Button,{style:{marginTop:\"2rem\"},onClick:getContract,children:\"Get Contract\"})]}),/*#__PURE__*/_jsx(Divider,{plain:true,children:\"Deploy a new Dead Man's Switch\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Input,{size:\"large\",id:\"decryptionKey\",placeholder:\"Decryption Key\"}),/*#__PURE__*/_jsx(Input,{style:{marginTop:\"1.25rem\"},size:\"large\",id:\"cadence\",placeholder:\"When to check in hours\",max:\"168\"}),/*#__PURE__*/_jsx(Button,{style:{marginTop:\"2rem\"},onClick:createContract,children:\"Create Dead Man's Switch\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"6rem\"},children:[/*#__PURE__*/_jsx(Title,{level:5,children:\"Frequently Asked Questions\"}),/*#__PURE__*/_jsxs(Collapse,{children:[/*#__PURE__*/_jsxs(Panel,{header:\"How it works\",children:[\"This should be used a contingency if your life or reputation is in danger.\",/*#__PURE__*/_jsxs(Paragraph,{style:{marginTop:\".5rem\"},children:[\"Prerequisites: \",/*#__PURE__*/_jsx(\"a\",{href:\"https://www.youtube.com/watch?v=MfkqgXNPiHg\",target:\"_blank\",children:\"How to start using Metamask\"})]}),/*#__PURE__*/_jsxs(\"ul\",{style:{marginTop:\"1rem\"},children:[/*#__PURE__*/_jsx(\"li\",{children:\"Upload your encrypted files somewhere public and distribute it to as many people as possible. Uploading to IPFS *link to IPFS* would be preferable since it is a more permanent and decentralized way of storing files.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Deploy the Dead Man's Switch contract with the decryption key and cadence of when the switch should be checked up on. The decryption key is not visible until the switch activates.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"The switch only activates if the you haven't checked in on it in time.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Once activated, anyone will able to see the decryption phrase.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Keep note of the address of the smart contract. You will need this in order to interact with the contract using this website, otherwise you can look at your transactions and find the contract again that way.\"})]})]}),/*#__PURE__*/_jsx(Panel,{header:\"Why is the Ethereuem Blockchain perfect for this?\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Blockchains are (usually) open and immutable. Or in other words, transactions on a public blockchain are available for anyone to see and are permanent. On Ethereum, you can also store logic for transactions by interacting with Smart Contracts *href to smart contracts*. Smart Contracts are very similar to programs, only that they run on and use the Ethereum Blockchain for data. That means that you can store a limited amount of data in a Smart Contract. Once this smart contract is deployed, there is no stopping it unless the deployer of the contract loses control of their wallet, in which case it was already probably too late for them. If the switch activates, then *anyone* will be able to decrypt and view the information that the deployer wanted to use as contigency for their safety.\"})}),/*#__PURE__*/_jsx(Panel,{header:\"Does it cost anything?\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Nope. Only gas for transactions.\"})})]})]})]});}export default App;","map":{"version":3,"sources":["C:/Users/samba/Desktop/ETH Projects/dead-mans-switch/dead-mans-switch-front-end/src/App.js"],"names":["Layout","Menu","Row","Col","ContractCode","BrowserRouter","Router","Link","Route","Switch","DeadMansContract","ethers","ContractFactory","useState","Collapse","Button","Input","Typography","Divider","Spin","LoadingOutlined","ContractInteraction","Title","Paragraph","Text","Panel","antIcon","fontSize","width","Header","Content","Footer","App","position","zIndex","marginTop","ContractSetup","currentAccount","setCurrentAccount","isLoading","setIsLoading","contractExists","setContractExists","contractAddress","setContractAddress","connectWallet","window","ethereum","alert","request","method","accounts","console","log","createContract","provider","providers","Web3Provider","signer","getSigner","decryptionKey","document","getElementById","value","cadence","factory","abi","bytecode","deploy","contract","deployTransaction","wait","then","address","getContract","_contractAddress","marginBottom"],"mappings":"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","sourcesContent":["import './App.css';\n\nimport { Layout, Menu, Row, Col } from 'antd';\nimport \"antd/dist/antd.css\";\n\nimport ContractCode from './components/smartContract';\n\nimport { BrowserRouter as Router, Link, Route, Switch } from \"react-router-dom\";\n\nimport DeadMansContract from './utils/DeadMansContract.abi.json';\nimport { ethers, ContractFactory } from \"ethers\";\nimport { useState } from 'react';\n\nimport { Collapse, Button, Input, Typography, Divider, Spin } from 'antd';\nimport \"antd/dist/antd.css\";\nimport { LoadingOutlined } from '@ant-design/icons';\nimport ContractInteraction from './components/contractInteraction';\n\nconst { Title, Paragraph, Text } = Typography;\nconst { Panel } = Collapse;\nconst antIcon = <LoadingOutlined style={{ fontSize: 92, width: 100 }} spin />;\n\n\nconst { Header, Content, Footer } = Layout;\nfunction App() {\n  return (\n    <Router>\n      <Layout>\n        <Header style={{ position: \"fixed\", zIndex: 1, width: \"100%\" }}>\n          <Menu theme=\"dark\" mode=\"horizontal\" >\n            {/* Logo? */}\n            <Menu.Item key=\"1\">\n              Home<Link to=\"/\" />\n            </Menu.Item>\n            <Menu.Item key=\"2\">\n              Smart Contract<Link to=\"code\" />\n            </Menu.Item>\n          </Menu>\n        </Header>\n        <Content style={{ marginTop: \"6rem\" }}>\n          <Row justify=\"center\">\n            <Col span={12}>\n              <ContractSetup/>\n              <Switch>\n                <Route exact path=\"/\" component={ContractSetup} />\n                <Route eaxact path=\"/code\" component={ContractCode} />\n              </Switch>\n            </Col>\n          </Row>\n        </Content>\n\n        <Footer  style={{marginTop: \"48px\" }}>Disclaimer: This is just a fun project that I wanted to do. Please don't use this for anything that is actually super duper serious. I am not responsible on how this is used</Footer>\n      </Layout>\n    </Router>\n  );\n}\n\nfunction ContractSetup() {\n  const [currentAccount, setCurrentAccount] = useState(\"\");\n  const [isLoading, setIsLoading] = useState();\n  const [contractExists, setContractExists] = useState();\n  const [contractAddress, setContractAddress] = useState();\n\n  const connectWallet = async() => {\n      try {\n          const { ethereum } = window;\n\n          if (!ethereum) {\n              alert(\"This app only works with MetaMask for now!\");\n              return;\n          }\n\n          const accounts = await ethereum.request({ method: \"eth_requestAccounts\" });\n          console.log(\"Connected\", accounts[0]);\n          setCurrentAccount(accounts[0]);\n      } catch (error) {\n          console.log(error)\n      }\n  }\n\n  const createContract = async() => {\n      try {\n          const { ethereum } = window;\n          if (ethereum) {\n              const provider = new ethers.providers.Web3Provider(ethereum)\n              const signer = provider.getSigner();\n              const decryptionKey = document.getElementById(\"decryptionKey\").value;\n              const cadence = document.getElementById(\"cadence\").value;\n\n              const factory = new ContractFactory(DeadMansContract.abi, DeadMansContract.bytecode, signer);\n\n              const contract = await factory.deploy(decryptionKey, cadence);\n              console.log(\"Transaction sent\");\n              setIsLoading(true);\n\n              await contract.deployTransaction.wait().then(() => { // refactor to use async await\n                  console.log(contract.address);\n                  setIsLoading(false);\n                  setContractExists(true);\n                  setContractAddress(contract.address);\n              });\n\n          } else {\n              console.log(\"Ethereum object doesn't exist!\")\n          }\n      } catch (error) {\n          console.log(error);\n      }\n  }\n\n  const getContract = () => {\n      // Error if not the correct address\n      const _contractAddress = document.getElementById(\"contractAddress\").value;\n      setContractAddress(_contractAddress);\n      setContractExists(true);\n  }\n\n  return (\n      <div>\n          <Title style={{fontSize:\"56px\"}}>Dead Man's Switch</Title>\n          {\n              !currentAccount ? (\n                  <Button size=\"large\" style={{marginBottom: \"24px\"}} onClick={connectWallet}>\n                      Connect Wallet\n                  </Button>\n              ) : <Title level={2}><Text underline>Currently connected as: {currentAccount}</Text></Title>\n          }\n\n          <Title level={2} style={{marginTop: \"2rem\", marginBottom: \"1.5rem\"}}>What is a Dead Man's Switch?</Title>\n          <Paragraph>\n              A Dead Man's Switch is a switch that is designed to be activated or deactivated if the human operator becomes incapcitated such as through death, loss of consciousness,\n              or being bodily removed from control. Originally applied to switches on a vehicle or machine, it has since come to be used to describe other intangible uses, as in computer software. &nbsp;\n              <a href=\"https://en.wikipedia.org/wiki/Dead_man%27s_switch\" target=\"_blank\">\n                  Source: Wikipedia (Dead Man's Switch)\n              </a>\n          </Paragraph>\n          <Paragraph style={{marginBottom: \"4rem\"}}>\n              This implementation of a Dead Man's Switch has two parts to it. The file/information that is being used as a contigency to ensure a person's safety and the smart contract which\n              lives on the blockchain that has the decrption key to that file.\n          </Paragraph>\n\n          {\n              isLoading ?\n                  <Spin indicator={antIcon} style={{ width: \"100%\", marginTop: \"4rem\" }} /> :\n                  (\n                      <div>\n                          {contractExists ? <ContractInteraction address={contractAddress} /> : (\n                              <div className=\"inputs\">\n                                  <Divider plain>Check on deployed Dead Man's Switch</Divider>\n                                  <div>\n                                      <Input size=\"large\" id=\"contractAddress\" placeholder=\"Address of contract\"></Input>\n                                      <Button style={{ marginTop: \"2rem\" }} onClick={getContract}>Get Contract</Button>\n                                  </div>\n\n                                  <Divider plain>Deploy a new Dead Man's Switch</Divider>\n                                  <div>\n                                      <Input size=\"large\" id=\"decryptionKey\" placeholder=\"Decryption Key\"></Input>\n                                      <Input style={{ marginTop: \"1.25rem\" }} size=\"large\" id=\"cadence\" placeholder=\"When to check in hours\" max=\"168\"></Input>\n                                      <Button style={{ marginTop: \"2rem\" }} onClick={createContract}>Create Dead Man's Switch</Button>\n                                  </div>\n                              </div>\n                          )}\n                      </div>\n                  )\n          }\n\n          <div style={{ marginTop: \"6rem\" }}>\n              <Title level={5}>Frequently Asked Questions</Title>\n              <Collapse>\n                  <Panel header=\"How it works\">\n                      This should be used a contingency if your life or reputation is in danger.\n                      <Paragraph style={{marginTop: \".5rem\"}}>\n                          Prerequisites: <a href=\"https://www.youtube.com/watch?v=MfkqgXNPiHg\" target=\"_blank\">How to start using Metamask</a>\n                      </Paragraph>\n\n                      <ul style={{ marginTop: \"1rem\" }}>\n                          <li>Upload your encrypted files somewhere public and distribute it to as many people as possible. Uploading to IPFS *link to IPFS* would be preferable since it is a more permanent and decentralized way of storing files.</li>\n                          <li>Deploy the Dead Man's Switch contract with the decryption key and cadence of when the switch should be checked up on. The decryption key is not visible until the switch activates.</li>\n                          <li>The switch only activates if the you haven't checked in on it in time.</li>\n                          <li>Once activated, anyone will able to see the decryption phrase.</li>\n                          <li>Keep note of the address of the smart contract. You will need this in order to interact with the contract using this website, otherwise you can look at your transactions and find the contract again that way.</li>\n                      </ul>\n                  </Panel>\n                  <Panel header=\"Why is the Ethereuem Blockchain perfect for this?\"><p>\n                      Blockchains are (usually) open and immutable. Or in other words, transactions on a public blockchain are available for anyone to see and are permanent. On Ethereum, you can also\n                      store logic for transactions by interacting with Smart Contracts *href to smart contracts*. Smart Contracts are very similar to programs, only that they run on and use the Ethereum Blockchain for data.\n                      That means that you can store a limited amount of data in a Smart Contract.\n\n                      Once this smart contract is deployed, there is no stopping it unless the deployer of the contract loses control of their wallet, in which case it was already probably too late for them.\n                      If the switch activates, then *anyone* will be able to decrypt and view the information that the deployer wanted to use as contigency for their safety.\n                  </p></Panel>\n                  <Panel header=\"Does it cost anything?\"><p>Nope. Only gas for transactions.</p></Panel>\n              </Collapse>\n          </div>\n      </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}