{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\samba\\\\Desktop\\\\ETH Projects\\\\dead-mans-switch\\\\dead-mans-switch-front-end\\\\src\\\\components\\\\contractInteraction.jsx\";\nimport { Button, Space, Input } from 'antd';\nimport React from 'react';\nimport DeadMansContract from '../utils/DeadMansContract.abi.json';\nimport { ethers } from \"ethers\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ContractInteraction extends React.Component {\n  constructor() {\n    super();\n\n    this.initContract = () => {\n      const provider = new ethers.providers.Web3Provider(ethereum);\n      const signer = provider.getSigner();\n      const contract = new ethers.Contract(this.props.address, DeadMansContract.abi, signer);\n      return contract;\n    };\n\n    this.isActive = async () => {\n      const tx = this.initContract().isActive();\n      this.setState({\n        pendingTx: true\n      });\n      await tx.then(() => {\n        this.setState({\n          pendingTx: false,\n          showIsActiveText: true,\n          active: tx\n        });\n        console.log(this.state.active);\n      });\n    };\n\n    this.tick = async () => {\n      const tx = await this.initContract().tick();\n    };\n\n    this.getDecryptionKey = async () => {\n      const tx = await this.initContract().getDecryptionKey(); // Will error if  block timestamp < nextTimestamp ***\n    };\n\n    this.getNextTimeStamp = async () => {\n      const tx = await this.initContract().getNextTimeStamp();\n    };\n\n    this.setUrl = async () => {\n      const newUrl = document.getElementById(\"setUrl\").value;\n      const tx = await this.initContract().setUrl(newUrl);\n    };\n\n    this.getUrl = async () => {\n      const tx = this.initContract().getUrl();\n      this.setState({\n        pendingTx: true\n      });\n      await tx.then(() => {\n        console.log(tx);\n        this.setState({\n          pendingTx: false,\n          showGetUrlText: true,\n          url: tx\n        });\n        console.log(this.state.url);\n      });\n    };\n\n    this.defuse = async () => {\n      // Show warning modal\n      const tx = await this.initContract().defuse();\n    };\n\n    this.renounceOwnership = async () => {\n      // Pop warning modal before allowing this to happpen\n      const tx = await this.initContract().renounceOwnership();\n    };\n\n    this.state = {\n      active: false,\n      url: \"\",\n      decryptionKey: \"\",\n      pendingTx: false,\n      showIsActiveText: false,\n      showTickText: false,\n      showRenounceText: false,\n      showGetDecryptionText: false,\n      showDefuseText: false,\n      showGetUrlText: false,\n      showSetUrlText: false\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Contract Address: \", this.props.address]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Space, {\n        direction: \"vertical\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: this.isActive,\n          children: \"Check Heartbeat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this), this.state.showIsActiveText && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"The switch is \", this.state.active ? \"still \" : \"not \", \" being monitored.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 53\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: this.tick,\n          children: \"Add Time\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: this.getNextTimeStamp,\n          children: \"Get Next Time Stamp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this), this.state.showNextTimeStamp, /*#__PURE__*/_jsxDEV(Button, {\n          onClick: this.defuse,\n          children: \"Defuse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: this.renounceOwnership,\n          children: \"Renounce Ownership\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: this.getUrl,\n          children: \"Get URL\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this), this.state.showGetUrlText && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: this.state.url ? \"There was no link set\" : this.state.url\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 51\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: this.setUrl,\n          children: \"Set Url\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          size: \"large\",\n          id: \"setUrl\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: this.getDecryptionKey,\n          children: \"Reveal Decryption Key\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this), this.state.showGetDecryptionText && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: this.state.decryptionKey === \"\" ? \"\" : this.state.url\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 58\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default ContractInteraction;","map":{"version":3,"sources":["C:/Users/samba/Desktop/ETH Projects/dead-mans-switch/dead-mans-switch-front-end/src/components/contractInteraction.jsx"],"names":["Button","Space","Input","React","DeadMansContract","ethers","ContractInteraction","Component","constructor","initContract","provider","providers","Web3Provider","ethereum","signer","getSigner","contract","Contract","props","address","abi","isActive","tx","setState","pendingTx","then","showIsActiveText","active","console","log","state","tick","getDecryptionKey","getNextTimeStamp","setUrl","newUrl","document","getElementById","value","getUrl","showGetUrlText","url","defuse","renounceOwnership","decryptionKey","showTickText","showRenounceText","showGetDecryptionText","showDefuseText","showSetUrlText","render","showNextTimeStamp"],"mappings":";AAAA,SAASA,MAAT,EAAiBC,KAAjB,EAAwBC,KAAxB,QAAqC,MAArC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,SAASC,MAAT,QAAuB,QAAvB;;;AAEA,MAAMC,mBAAN,SAAkCH,KAAK,CAACI,SAAxC,CAAkD;AAE9CC,EAAAA,WAAW,GAAG;AACV;;AADU,SAiBdC,YAjBc,GAiBC,MAAM;AACjB,YAAMC,QAAQ,GAAG,IAAIL,MAAM,CAACM,SAAP,CAAiBC,YAArB,CAAkCC,QAAlC,CAAjB;AACA,YAAMC,MAAM,GAAGJ,QAAQ,CAACK,SAAT,EAAf;AACA,YAAMC,QAAQ,GAAG,IAAIX,MAAM,CAACY,QAAX,CAAoB,KAAKC,KAAL,CAAWC,OAA/B,EAAwCf,gBAAgB,CAACgB,GAAzD,EAA8DN,MAA9D,CAAjB;AACA,aAAOE,QAAP;AACH,KAtBa;;AAAA,SAwBdK,QAxBc,GAwBH,YAAY;AACnB,YAAMC,EAAE,GAAG,KAAKb,YAAL,GAAoBY,QAApB,EAAX;AAEA,WAAKE,QAAL,CAAc;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAAd;AAEA,YAAMF,EAAE,CAACG,IAAH,CAAQ,MAAM;AAChB,aAAKF,QAAL,CAAc;AAAEC,UAAAA,SAAS,EAAE,KAAb;AAAoBE,UAAAA,gBAAgB,EAAE,IAAtC;AAA4CC,UAAAA,MAAM,EAAEL;AAApD,SAAd;AACAM,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAL,CAAWH,MAAvB;AACH,OAHK,CAAN;AAKH,KAlCa;;AAAA,SAoCdI,IApCc,GAoCP,YAAY;AACf,YAAMT,EAAE,GAAG,MAAM,KAAKb,YAAL,GAAoBsB,IAApB,EAAjB;AACH,KAtCa;;AAAA,SAwCdC,gBAxCc,GAwCK,YAAY;AAC3B,YAAMV,EAAE,GAAG,MAAM,KAAKb,YAAL,GAAoBuB,gBAApB,EAAjB,CAD2B,CAE3B;AACH,KA3Ca;;AAAA,SA8CdC,gBA9Cc,GA8CK,YAAY;AAC3B,YAAMX,EAAE,GAAG,MAAM,KAAKb,YAAL,GAAoBwB,gBAApB,EAAjB;AACH,KAhDa;;AAAA,SAkDdC,MAlDc,GAkDL,YAAY;AACjB,YAAMC,MAAM,GAAGC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAjD;AACA,YAAMhB,EAAE,GAAG,MAAM,KAAKb,YAAL,GAAoByB,MAApB,CAA2BC,MAA3B,CAAjB;AACH,KArDa;;AAAA,SAuDdI,MAvDc,GAuDL,YAAY;AACjB,YAAMjB,EAAE,GAAG,KAAKb,YAAL,GAAoB8B,MAApB,EAAX;AAEA,WAAKhB,QAAL,CAAc;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAAd;AAEA,YAAMF,EAAE,CAACG,IAAH,CAAQ,MAAM;AAChBG,QAAAA,OAAO,CAACC,GAAR,CAAYP,EAAZ;AACA,aAAKC,QAAL,CAAc;AAACC,UAAAA,SAAS,EAAE,KAAZ;AAAmBgB,UAAAA,cAAc,EAAE,IAAnC;AAAyCC,UAAAA,GAAG,EAAEnB;AAA9C,SAAd;AACAM,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAL,CAAWW,GAAvB;AACH,OAJK,CAAN;AAMH,KAlEa;;AAAA,SAoEdC,MApEc,GAoEL,YAAY;AACjB;AACA,YAAMpB,EAAE,GAAG,MAAM,KAAKb,YAAL,GAAoBiC,MAApB,EAAjB;AACH,KAvEa;;AAAA,SAyEdC,iBAzEc,GAyEM,YAAY;AAC5B;AACA,YAAMrB,EAAE,GAAG,MAAM,KAAKb,YAAL,GAAoBkC,iBAApB,EAAjB;AACH,KA5Ea;;AAEV,SAAKb,KAAL,GAAa;AACTH,MAAAA,MAAM,EAAE,KADC;AAETc,MAAAA,GAAG,EAAE,EAFI;AAGTG,MAAAA,aAAa,EAAE,EAHN;AAITpB,MAAAA,SAAS,EAAE,KAJF;AAKTE,MAAAA,gBAAgB,EAAE,KALT;AAMTmB,MAAAA,YAAY,EAAE,KANL;AAOTC,MAAAA,gBAAgB,EAAE,KAPT;AAQTC,MAAAA,qBAAqB,EAAE,KARd;AASTC,MAAAA,cAAc,EAAE,KATP;AAUTR,MAAAA,cAAc,EAAE,KAVP;AAWTS,MAAAA,cAAc,EAAE;AAXP,KAAb;AAaH;;AA+DDC,EAAAA,MAAM,GAAG;AACL,wBACI;AAAA,8BAEI;AAAA,yCAAwB,KAAKhC,KAAL,CAAWC,OAAnC;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,eAGI,QAAC,KAAD;AAAO,QAAA,SAAS,EAAC,UAAjB;AAAA,gCAEI,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAE,KAAKE,QAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,EAGK,KAAKS,KAAL,CAAWJ,gBAAX,iBAA+B;AAAA,uCAAkB,KAAKI,KAAL,CAAWH,MAAX,GAAoB,QAApB,GAA+B,MAAjD;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHpC,eAII,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAE,KAAKI,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJJ,eAKI,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAE,KAAKE,gBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALJ,EAMK,KAAKH,KAAL,CAAWqB,iBANhB,eAOI,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAE,KAAKT,MAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPJ,eAQI,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAE,KAAKC,iBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARJ,eASI,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAE,KAAKJ,MAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBATJ,EAUK,KAAKT,KAAL,CAAWU,cAAX,iBAA6B;AAAA,oBAAI,KAAKV,KAAL,CAAWW,GAAX,GAAiB,uBAAjB,GAA2C,KAAKX,KAAL,CAAWW;AAA1D;AAAA;AAAA;AAAA;AAAA,gBAVlC,eAWI,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAE,KAAKP,MAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAXJ,eAYI,QAAC,KAAD;AAAO,UAAA,IAAI,EAAC,OAAZ;AAAoB,UAAA,EAAE,EAAC;AAAvB;AAAA;AAAA;AAAA;AAAA,gBAZJ,eAaI,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAE,KAAKF,gBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAbJ,EAcK,KAAKF,KAAL,CAAWiB,qBAAX,iBAAoC;AAAA,oBAAI,KAAKjB,KAAL,CAAWc,aAAX,KAA6B,EAA7B,GAAkC,EAAlC,GAAuC,KAAKd,KAAL,CAAWW;AAAtD;AAAA;AAAA;AAAA;AAAA,gBAdzC;AAAA;AAAA;AAAA;AAAA;AAAA,cAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAsBH;;AAvG6C;;AA0GlD,eAAenC,mBAAf","sourcesContent":["import { Button, Space, Input } from 'antd';\r\nimport React from 'react';\r\nimport DeadMansContract from '../utils/DeadMansContract.abi.json';\r\nimport { ethers } from \"ethers\";\r\n\r\nclass ContractInteraction extends React.Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            active: false,\r\n            url: \"\",\r\n            decryptionKey: \"\",\r\n            pendingTx: false,\r\n            showIsActiveText: false,\r\n            showTickText: false,\r\n            showRenounceText: false,\r\n            showGetDecryptionText: false,\r\n            showDefuseText: false,\r\n            showGetUrlText: false,\r\n            showSetUrlText: false\r\n        };\r\n    }\r\n\r\n    initContract = () => {\r\n        const provider = new ethers.providers.Web3Provider(ethereum);\r\n        const signer = provider.getSigner();\r\n        const contract = new ethers.Contract(this.props.address, DeadMansContract.abi, signer);\r\n        return contract;\r\n    }\r\n\r\n    isActive = async () => {\r\n        const tx = this.initContract().isActive();\r\n\r\n        this.setState({ pendingTx: true });\r\n\r\n        await tx.then(() => {\r\n            this.setState({ pendingTx: false, showIsActiveText: true, active: tx });\r\n            console.log(this.state.active)\r\n        });\r\n\r\n    };\r\n\r\n    tick = async () => {\r\n        const tx = await this.initContract().tick();\r\n    };\r\n\r\n    getDecryptionKey = async () => {\r\n        const tx = await this.initContract().getDecryptionKey();\r\n        // Will error if  block timestamp < nextTimestamp ***\r\n    };\r\n\r\n\r\n    getNextTimeStamp = async () => {\r\n        const tx = await this.initContract().getNextTimeStamp();\r\n    }\r\n    \r\n    setUrl = async () => {\r\n        const newUrl = document.getElementById(\"setUrl\").value;\r\n        const tx = await this.initContract().setUrl(newUrl);\r\n    };\r\n\r\n    getUrl = async () => {\r\n        const tx = this.initContract().getUrl();\r\n\r\n        this.setState({ pendingTx: true });\r\n\r\n        await tx.then(() => {\r\n            console.log(tx);\r\n            this.setState({pendingTx: false, showGetUrlText: true ,url: tx});\r\n            console.log(this.state.url);\r\n        });\r\n\r\n    };\r\n\r\n    defuse = async () => {\r\n        // Show warning modal\r\n        const tx = await this.initContract().defuse();\r\n    };\r\n\r\n    renounceOwnership = async () => {\r\n        // Pop warning modal before allowing this to happpen\r\n        const tx = await this.initContract().renounceOwnership();\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {/* Give more emphasis to this */}\r\n                <div>Contract Address: {this.props.address}</div>\r\n                <Space direction=\"vertical\">\r\n                    {/* Add icons to make them more interesting */}\r\n                    <Button onClick={this.isActive}>Check Heartbeat</Button>\r\n                    {this.state.showIsActiveText && <p>The switch is {this.state.active ? \"still \" : \"not \"} being monitored.</p>}\r\n                    <Button onClick={this.tick}>Add Time</Button>\r\n                    <Button onClick={this.getNextTimeStamp}>Get Next Time Stamp</Button>\r\n                    {this.state.showNextTimeStamp}\r\n                    <Button onClick={this.defuse}>Defuse</Button>\r\n                    <Button onClick={this.renounceOwnership}>Renounce Ownership</Button>\r\n                    <Button onClick={this.getUrl}>Get URL</Button>\r\n                    {this.state.showGetUrlText && <p>{this.state.url ? \"There was no link set\" : this.state.url}</p>}\r\n                    <Button onClick={this.setUrl}>Set Url</Button>\r\n                    <Input size=\"large\" id=\"setUrl\" />\r\n                    <Button onClick={this.getDecryptionKey}>Reveal Decryption Key</Button>\r\n                    {this.state.showGetDecryptionText && <p>{this.state.decryptionKey === \"\" ? \"\" : this.state.url}</p>}{/*  */}\r\n                </Space>\r\n            </div>\r\n        );\r\n    };\r\n}\r\n\r\nexport default ContractInteraction;"]},"metadata":{},"sourceType":"module"}