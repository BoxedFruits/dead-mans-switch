{"ast":null,"code":"import _classCallCheck from\"C:/Users/samba/Desktop/ETH Projects/dead-mans-switch/dead-mans-switch-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/samba/Desktop/ETH Projects/dead-mans-switch/dead-mans-switch-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/samba/Desktop/ETH Projects/dead-mans-switch/dead-mans-switch-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/samba/Desktop/ETH Projects/dead-mans-switch/dead-mans-switch-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{CopyBlock,dracula}from\"react-code-blocks\";import{Typography}from\"antd\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Title=Typography.Title;var ContractCode=/*#__PURE__*/function(_React$Component){_inherits(ContractCode,_React$Component);var _super=_createSuper(ContractCode);function ContractCode(){_classCallCheck(this,ContractCode);return _super.apply(this,arguments);}_createClass(ContractCode,[{key:\"render\",value:function render(){var code=\"\\n// SPDX-License-Identifier: MIT\\n// Dead Mans Contract\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"hardhat/console.sol\\\";\\nimport \\\"@openzeppelin/contracts/access/Ownable.sol\\\";\\n\\ncontract DeadMansContract is Ownable //Need to test functions in diff scenarios\\n{\\n    string private _decryptionKey;\\n    string _url;\\n    uint256 nextTimestamp;\\n    uint256 private _hourCadence;\\n\\n    event heartbeat();\\n\\n    constructor(string memory decryptionKey, uint256 hourCadence) {\\n        require(hourCadence < 168); // Owner has to check in atleast once a week\\n        _decryptionKey = decryptionKey;\\n        _hourCadence = hourCadence;\\n        nextTimestamp = block.timestamp + convertHourToUnixEpoch(_hourCadence);\\n    }\\n\\n    function isActive() public view onlyOwner returns (bool) {\\n        if (block.timestamp <= nextTimestamp) {\\n            return true;\\n        } else {\\n            return false;\\n        }\\n    }\\n\\n    function tick() public onlyOwner {\\n        require(block.timestamp <= nextTimestamp);\\n        nextTimestamp += convertHourToUnixEpoch(_hourCadence);\\n        emit heartbeat();\\n    }\\n\\n    function getDecryptionKey() public view returns (string memory) { // Owner has failed to check on DMS, reveal key.\\n        require(block.timestamp >= nextTimestamp, \\\"The switch has not been activated yet\\\");\\n        return _decryptionKey;\\n    }\\n\\n\\n    function getNextTimeStamp() public view returns (uint256) {\\n        return nextTimestamp;\\n    }\\n\\n    function setUrl(string memory url) public onlyOwner {\\n        _url = url;\\n    }\\n\\n    function getUrl() public view returns (string memory) {\\n        return _url;\\n    }\\n\\n    function defuse() public onlyOwner {\\n        _hourCadence = 0;\\n        nextTimestamp = 0;\\n        _decryptionKey = \\\"\\\";\\n        renounceOwnership();\\n    } // Turn off DMS\\n\\n    function _renounceOwnership() public onlyOwner {\\n        renounceOwnership();\\n    }\\n\\n    function convertHourToUnixEpoch(uint256 h) internal pure returns (uint256) {\\n        return h * 3600;\\n    }\\n}\\n\";return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Title,{level:2,children:\"Dead Man's Contract Source Code\"}),/*#__PURE__*/_jsx(CopyBlock,{text:code,language:\"javascript\",showLineNumber:\"true\",theme:dracula})]});}}]);return ContractCode;}(React.Component);export default ContractCode;","map":{"version":3,"sources":["C:/Users/samba/Desktop/ETH Projects/dead-mans-switch/dead-mans-switch-front-end/src/components/smartContract.jsx"],"names":["React","CopyBlock","dracula","Typography","Title","ContractCode","code","Component"],"mappings":"wwBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,CAAoBC,OAApB,KAAmC,mBAAnC,CACA,OAASC,UAAT,KAA2B,MAA3B,C,wFAEA,GAAQC,CAAAA,KAAR,CAAkBD,UAAlB,CAAQC,KAAR,C,GAEMC,CAAAA,Y,uQACF,iBAAS,CACL,GAAMC,CAAAA,IAAI,ghEAAV,CAyEA,mBACI,oCACI,KAAC,KAAD,EAAO,KAAK,CAAE,CAAd,6CADJ,cAEI,KAAC,SAAD,EACI,IAAI,CAAEA,IADV,CAEI,QAAQ,CAAC,YAFb,CAGI,cAAc,CAAC,MAHnB,CAII,KAAK,CAAEJ,OAJX,EAFJ,GADJ,CAYH,C,0BAvFsBF,KAAK,CAACO,S,EA0FjC,cAAeF,CAAAA,YAAf","sourcesContent":["import React from 'react';\r\nimport { CopyBlock, dracula } from \"react-code-blocks\";\r\nimport { Typography } from \"antd\";\r\n\r\nconst { Title } = Typography;\r\n\r\nclass ContractCode extends React.Component {\r\n    render() {\r\n        const code = `\r\n// SPDX-License-Identifier: MIT\r\n// Dead Mans Contract\r\n\r\npragma solidity ^0.8.0;\r\n\r\nimport \"hardhat/console.sol\";\r\nimport \"@openzeppelin/contracts/access/Ownable.sol\";\r\n\r\ncontract DeadMansContract is Ownable //Need to test functions in diff scenarios\r\n{\r\n    string private _decryptionKey;\r\n    string _url;\r\n    uint256 nextTimestamp;\r\n    uint256 private _hourCadence;\r\n\r\n    event heartbeat();\r\n\r\n    constructor(string memory decryptionKey, uint256 hourCadence) {\r\n        require(hourCadence < 168); // Owner has to check in atleast once a week\r\n        _decryptionKey = decryptionKey;\r\n        _hourCadence = hourCadence;\r\n        nextTimestamp = block.timestamp + convertHourToUnixEpoch(_hourCadence);\r\n    }\r\n\r\n    function isActive() public view onlyOwner returns (bool) {\r\n        if (block.timestamp <= nextTimestamp) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    function tick() public onlyOwner {\r\n        require(block.timestamp <= nextTimestamp);\r\n        nextTimestamp += convertHourToUnixEpoch(_hourCadence);\r\n        emit heartbeat();\r\n    }\r\n\r\n    function getDecryptionKey() public view returns (string memory) { // Owner has failed to check on DMS, reveal key.\r\n        require(block.timestamp >= nextTimestamp, \"The switch has not been activated yet\");\r\n        return _decryptionKey;\r\n    }\r\n\r\n\r\n    function getNextTimeStamp() public view returns (uint256) {\r\n        return nextTimestamp;\r\n    }\r\n\r\n    function setUrl(string memory url) public onlyOwner {\r\n        _url = url;\r\n    }\r\n\r\n    function getUrl() public view returns (string memory) {\r\n        return _url;\r\n    }\r\n\r\n    function defuse() public onlyOwner {\r\n        _hourCadence = 0;\r\n        nextTimestamp = 0;\r\n        _decryptionKey = \"\";\r\n        renounceOwnership();\r\n    } // Turn off DMS\r\n\r\n    function _renounceOwnership() public onlyOwner {\r\n        renounceOwnership();\r\n    }\r\n\r\n    function convertHourToUnixEpoch(uint256 h) internal pure returns (uint256) {\r\n        return h * 3600;\r\n    }\r\n}\r\n`;\r\n        return (\r\n            <div>\r\n                <Title level={2}>Dead Man's Contract Source Code</Title>\r\n                <CopyBlock\r\n                    text={code}\r\n                    language=\"javascript\"\r\n                    showLineNumber=\"true\"\r\n                    theme={dracula}\r\n                >\r\n                </CopyBlock>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ContractCode;"]},"metadata":{},"sourceType":"module"}